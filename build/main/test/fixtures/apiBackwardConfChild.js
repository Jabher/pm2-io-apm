"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const pmx = require(__dirname + '/../../src/index.js');
let timer;
let server;
pmx.init({
    network: true,
    ports: true,
    v8: true,
    transactions: { http_latency: 1 },
    http: true,
    deep_metrics: true,
    profiling: false
});
const express = require('express');
const app = express();
const httpModule = require('http');
app.get('/', function (req, res) {
    res.send('home');
});
server = app.listen(3001, function () {
    timer = setInterval(function () {
        httpModule.get('http://localhost:' + server.address().port);
    }, 100);
});
process.on('SIGINT', function () {
    clearInterval(timer);
    server.close();
    pmx.destroy();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpQmFja3dhcmRDb25mQ2hpbGQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0L2ZpeHR1cmVzL2FwaUJhY2t3YXJkQ29uZkNoaWxkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsR0FBRyxxQkFBcUIsQ0FBQyxDQUFBO0FBQ3RELElBQUksS0FBSyxDQUFBO0FBQ1QsSUFBSSxNQUFNLENBQUE7QUFFVixHQUFHLENBQUMsSUFBSSxDQUFDO0lBQ1AsT0FBTyxFQUFFLElBQUk7SUFDYixLQUFLLEVBQUUsSUFBSTtJQUNYLEVBQUUsRUFBRSxJQUFJO0lBQ1IsWUFBWSxFQUFFLEVBQUMsWUFBWSxFQUFFLENBQUMsRUFBQztJQUMvQixJQUFJLEVBQUUsSUFBSTtJQUNWLFlBQVksRUFBRSxJQUFJO0lBQ2xCLFNBQVMsRUFBRSxLQUFLO0NBQ2pCLENBQUMsQ0FBQTtBQUVGLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQTtBQUNsQyxNQUFNLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtBQUVyQixNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7QUFFbEMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsVUFBVSxHQUFHLEVBQUUsR0FBRztJQUM3QixHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQ2xCLENBQUMsQ0FBQyxDQUFBO0FBRUYsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFO0lBQ3hCLEtBQUssR0FBRyxXQUFXLENBQUM7UUFDbEIsVUFBVSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDN0QsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0FBQ1QsQ0FBQyxDQUFDLENBQUE7QUFFRixPQUFPLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUNuQixhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDcEIsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2QsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFBO0FBQ2YsQ0FBQyxDQUFDLENBQUEifQ==